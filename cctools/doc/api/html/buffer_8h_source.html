<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cctools: buffer.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_e91b50daf043faf49e177c41e4045673.html">dttools</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_6799dea93b790a5bddb17668b32e0132.html">src</a>
  </div>
</div>
<div class="contents">
<h1>buffer.h</h1><a href="buffer_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">Copyright (C) 2005- The University of Notre Dame</span>
<a name="l00003"></a>00003 <span class="comment">This software is distributed under the GNU General Public License.</span>
<a name="l00004"></a>00004 <span class="comment">See the file COPYING for details.</span>
<a name="l00005"></a>00005 <span class="comment">*/</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#ifndef BUFFER_H</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor">#define BUFFER_H</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;stdarg.h&gt;</span>
<a name="l00012"></a>00012 
<a name="l00019"></a>00019 <span class="preprocessor">#if !(defined(__GNUC__) || defined(__clang__)) &amp;&amp; !defined(__attribute__)</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#define __attribute__(x) </span><span class="comment">/* do nothing */</span>
<a name="l00021"></a>00021 <span class="preprocessor">#endif</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a><a class="code" href="structbuffer.html">00023</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structbuffer.html">buffer</a> {
<a name="l00024"></a>00024         <span class="keywordtype">char</span> *buf; <span class="comment">/* buf points to the start of the buffer, which may be a buffer on the stack or heap */</span>
<a name="l00025"></a>00025         <span class="keywordtype">char</span> *end; <span class="comment">/* the current end of the buffer */</span>
<a name="l00026"></a>00026         <span class="keywordtype">size_t</span> len; <span class="comment">/* current size of buffer */</span>
<a name="l00027"></a>00027         <span class="keywordtype">size_t</span> max; <span class="comment">/* maximum size of buffer */</span>
<a name="l00028"></a>00028         <span class="keywordtype">int</span> abort_on_failure; <span class="comment">/* call debug.c fatal(...) on error instead of returning  */</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030         <span class="keywordtype">char</span> initial[1&lt;&lt;12]; <span class="comment">/* a reasonably sized buffer to use initially so we avoid (numerous) heap allocations */</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032         <span class="comment">/* a user provided buffer which replaces initial if larger */</span>
<a name="l00033"></a>00033         <span class="keyword">struct </span>{
<a name="l00034"></a>00034                 <span class="keywordtype">char</span> *buf;
<a name="l00035"></a>00035                 <span class="keywordtype">size_t</span> len;
<a name="l00036"></a>00036         } ubuf;
<a name="l00037"></a>00037 } <a class="code" href="structbuffer.html">buffer_t</a>;
<a name="l00038"></a>00038 
<a name="l00048"></a>00048 <span class="keywordtype">void</span> <a class="code" href="buffer_8h.html#a8b549043c62502e9808e2a4f6238984b" title="Initialize a buffer.">buffer_init</a>(<a class="code" href="structbuffer.html">buffer_t</a> * b);
<a name="l00049"></a>00049 
<a name="l00060"></a>00060 <span class="keywordtype">void</span> <a class="code" href="buffer_8h.html#a7733d690cdc50231d347cca57b07eb68" title="Use the provided buffer as a starting buffer.">buffer_ubuf</a>(<a class="code" href="structbuffer.html">buffer_t</a> * b, <span class="keywordtype">char</span> *buf, <span class="keywordtype">size_t</span> len);
<a name="l00061"></a>00061 
<a name="l00067"></a>00067 <span class="keywordtype">void</span> <a class="code" href="buffer_8h.html#a6e67806fd1c7fb6fcacf879a845b39be" title="Set the maximum size of the buffer.">buffer_max</a>(<a class="code" href="structbuffer.html">buffer_t</a> * b, <span class="keywordtype">size_t</span> max);
<a name="l00068"></a>00068 
<a name="l00074"></a>00074 <span class="keywordtype">void</span> <a class="code" href="buffer_8h.html#a0006f462fd2611883da0401d70c049e5" title="Set the buffer to call fatal(.">buffer_abortonfailure</a>(<a class="code" href="structbuffer.html">buffer_t</a> * b, <span class="keywordtype">int</span> abortonfailure);
<a name="l00075"></a>00075 
<a name="l00079"></a>00079 <span class="keywordtype">void</span> <a class="code" href="buffer_8h.html#af075a6de5c39e3a750ba0f710c139a7f" title="Free any resources and memory in use by a buffer.">buffer_free</a>(<a class="code" href="structbuffer.html">buffer_t</a> * b);
<a name="l00080"></a>00080 
<a name="l00090"></a>00090 <span class="keywordtype">int</span> <a class="code" href="buffer_8h.html#ade08d59a590f5e17508c0bce02f2b795" title="Print the formatted output to the buffer.">buffer_putvfstring</a>(<a class="code" href="structbuffer.html">buffer_t</a> * b, <span class="keyword">const</span> <span class="keywordtype">char</span> *format, va_list ap);
<a name="l00091"></a>00091 <span class="preprocessor">#define buffer_vprintf buffer_putvfstring</span>
<a name="l00092"></a>00092 <span class="preprocessor"></span>
<a name="l00100"></a>00100 <span class="keywordtype">int</span> <a class="code" href="buffer_8h.html#a4fa50b2bf136939548d62a09e6cf7401" title="Appends the formatted output to the buffer.">buffer_putfstring</a>(<a class="code" href="structbuffer.html">buffer_t</a> * b, <span class="keyword">const</span> <span class="keywordtype">char</span> *format, ...)
<a name="l00101"></a>00101 __attribute__ (( format(printf,2,3) )) ;
<a name="l00102"></a>00102 <span class="preprocessor">#define buffer_printf buffer_putfstring</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span>
<a name="l00110"></a>00110 <span class="keywordtype">int</span> <a class="code" href="buffer_8h.html#a60aac4cd6e4bf803ff7a2bb839167ea2" title="Appends the string to the end of the buffer.">buffer_putlstring</a>(<a class="code" href="structbuffer.html">buffer_t</a> * b, <span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">size_t</span> len);
<a name="l00111"></a>00111 
<a name="l00117"></a><a class="code" href="buffer_8h.html#a0551fc46a6f4804315c348a189ff308c">00117</a> <span class="preprocessor">#define buffer_putstring(b,s)  (buffer_putlstring(b,s,strlen(s)))</span>
<a name="l00118"></a>00118 <span class="preprocessor"></span>
<a name="l00124"></a><a class="code" href="buffer_8h.html#a3e9c64ecbc4f1d887662569a1e50828a">00124</a> <span class="preprocessor">#define buffer_putliteral(b,l)  (buffer_putlstring(b,l &quot;&quot;,sizeof(l)-1))</span>
<a name="l00125"></a>00125 <span class="preprocessor"></span>
<a name="l00133"></a>00133 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="buffer_8h.html#ac00ed4e5591ab5f6a96b83233432e004" title="Returns the buffer as a string.">buffer_tostring</a>(<a class="code" href="structbuffer.html">buffer_t</a> * b, <span class="keywordtype">size_t</span> * size);
<a name="l00134"></a>00134 
<a name="l00140"></a>00140 <span class="keywordtype">void</span> <a class="code" href="buffer_8h.html#a29ceca8be88b8e553ad6d0aefdaa95fe" title="Rewinds the buffer to position n.">buffer_rewind</a>(<a class="code" href="structbuffer.html">buffer_t</a> * b, <span class="keywordtype">size_t</span> n);
<a name="l00141"></a>00141 
<a name="l00147"></a>00147 <span class="keywordtype">size_t</span> <a class="code" href="buffer_8h.html#a3943a78dd3fc06a79e06f7aaa30bf4b0" title="Get the current position in the buffer.">buffer_pos</a>(<a class="code" href="structbuffer.html">buffer_t</a> * b);
<a name="l00148"></a>00148 
<a name="l00149"></a>00149 <span class="preprocessor">#endif </span><span class="comment">/* BUFFER_H */</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 10 Jul 2014 for cctools by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
